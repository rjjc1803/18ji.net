@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/layui/css/layui.css" rel="stylesheet" />
    <script src="~/layui/layui.js"></script>

    <style>
        #main {
            width: 70%;
            height: 100%;
            margin-top: 30px;
            margin-left: 150px;
            flex-wrap: nowrap; /*容器内项目换行方式*/
        }
        .layui-form-item{
            position:absolute;
        }
         #top{
            color:burlywood;
            padding-bottom:40px;
            padding-top:10px;
        }
    </style>

</head>
<body>

    <div id="main">
        <div id="top">
            <label style="margin-bottom:10px;zoom:130%">第一步：输入要加入班级的编号，点击[查询]按钮，核实班级信息无误后点击[申请加入」按钮。
</label>
            <label style="zoom:130%;">第二步：提示加入成功后，您就[直接加入]了该班级。</label>
            <label style="zoom:130%;">第三步：可以在自己账号下的[我的班级]查看到加入进班级的同学。</label>
        </div>
    <form class="layui-form layui-form-pane" action="">
        <div class="layui-form-item" style="margin-bottom:50px;">
            <label class="layui-form-label">班级编号</label>
            <div class="layui-input-inline">
                <input id="ClassID" type="text"  lay-verify="required" placeholder="请输入班级的编号" autocomplete="off" class="layui-input">
            </div>
        </div>
    </form>
        <div class="layui-form-item" style="left:430px;">
            <button  id="Search" class="layui-btn">查询</button>
        </div>

        <div id="classCont" style="display:none;position:absolute;margin-top:50px;">
            <fieldset class="layui-elem-field" >
                <legend style="zoom:70%">班级编号</legend>
                <div class="layui-field-box" style="zoom:90%">
                    <span><b id="classid"></b></span>
                </div>
            </fieldset>
            <br>
            <fieldset class="layui-elem-field">
                <legend style="zoom:70%">班级名称</legend>
                <div class="layui-field-box" style="zoom:90%">
                    <span><b id="classname"></b></span>
                </div>
            </fieldset>
            <br>
            <fieldset class="layui-elem-field">
                <legend style="zoom:70%">学校姓名</legend>
                <div  class="layui-field-box" style="zoom:90%">
                    <span><b id="schname"></b></span>
                </div>
            </fieldset>
            <br>
            <fieldset class="layui-elem-field">
                <legend style="zoom:70%">班级简介</legend>
                <div class="layui-field-box" style="zoom:90%">
                    <span><b id="content"></b></span>                    
                </div>
            </fieldset>
           
            <button id="btnJoinClass" type="button" class="layui-btn" style="margin-left:40%;margin-top:20px;">申请加入</button>

        </div>
   </div>

    <script>

        layui.use(['jquery', 'table', 'form'], function () {
            bindEvent();
        });

        function bindEvent() {
            $('#Search').on('click', GetClassById);
            $('#btnJoinClass').on('click', JoinClassById);
        }

        function GetClassById(e) {
            e.preventDefault();
            var classid = $('#ClassID').val();
            $.post('/Class/GetClassById', { ID: classid }, function (resp) {
                $('#classCont').show();
                $('#classid').html(resp.ClassID);
                $('#classname').html(resp.Name);
                $('#schname').html(resp.SchName);
                $('#content').html(resp.Content);
            })

        }

        function JoinClassById() {
            
            var classid = $('#ClassID').val(),
                userid = @ViewBag.CurUserID;
            $.post('/Home/UpdateClassId', {UserID : userid ,ClassID: classid}, function (resp) {
                var obj = resp;
                if (obj.Status) {
                    layui.layer.msg('加入班级成功！');
                } else {
                    $('#tipMsg').text(obj.Message);
                }

            });
        }

    </script>
</body>
</html>
